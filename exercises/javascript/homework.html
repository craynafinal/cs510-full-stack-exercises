<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0" />
	</head>
	<body>
		<div id="output">output</div>

		<script type="text/javascript">
			var functionMake = function(strInput) {
				var ret = "<table border=\"1\"><tbody>";
				var rows = strInput.split("\n").filter(function(elem) { return elem.length != 0 });

				for (var i in rows) {
				  ret += "<tr>";
					
					var cols = rows[i].split(",");

					for (var j in cols) {
						ret += "<td>" + cols[j] + "</td>";
					}

					ret += "</tr>";	
				}
				ret += "</tbody></table>";
				document.getElementById('output').innerHTML = ret;
				
			};

			functionMake('a,b,c\n1,2,3\n'); // the new line at the end should not make a difference
		</script>
	</body>
</html>
